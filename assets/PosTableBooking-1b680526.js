import{_ as C,D as S,M as A,r as b,o as l,c as n,d as m,w as h,b as s,s as V,e as g,F as f,t as _,a as x,n as H,z as M,f as k,l as T,v as B}from"./index-bb9ec461.js";import{a as F}from"./axios-a342f982.js";import{d as U}from"./Datepicker-25b092c2.js";import{_ as N}from"./icon-table-black-39759b1d.js";import"./index-dbf64d1a.js";const p=S(),P={data(){return{tables:"",currentHour:"",modal:"",modalData:""}},components:{datepicker:U},mounted(){p.appSidebarHide=!0,p.appHeaderHide=!0,p.appContentClass="p-1 ps-xl-4 pe-xl-4 pt-xl-3 pb-xl-3",p.appContentFullHeight=!0,F.get("/assets/data/pos/table-booking.json").then(t=>{this.tables=t.data.tables})},beforeUnmount(){p.appSidebarHide=!1,p.appHeaderHide=!1,p.appContentClass="",p.appContentFullHeight=!1},methods:{checkTime(t){return t<10&&(t="0"+t),t},getTime(){var t=new Date,a=t.getHours(),i=t.getMinutes(),r=t.getSeconds(),e;return i=this.checkTime(i),r=this.checkTime(r),e=a>11?"pm":"am",a=a>12?a-12:a,setTimeout(this.getTime,500),a+":"+i+e},getAvailableTable(){var t=0,a=new Date,i=a.getHours(),r;r=i>11?"pm":"am",i=i>12?i-12:i,this.currentHour=this.checkTime(i)+":00"+r;for(var e=0;e<this.tables.length;e++)for(var o=0;o<this.tables[e].reservation.length;o++)this.tables[e].reservation[o].time==this.currentHour&&!this.tables[e].reservation[o].text&&t++;return t},getStatus(i,a){var i=i.split(":"),r=i[1].split("00"),e=r[1],o=parseInt(i[0]),u=e=="pm"&&o<12?o+12:o,w=new Date,v=w.getHours();return u==v&&a?"in-progress":v>u&&a?"completed":v<u&&a?"upcoming":""},checkSameHour(t){var a=new Date,i=a.getHours(),r=i>12?"pm":"am",e=i>12?i-12:i,e=e<10?"0"+e:e,o=e+":00"+r;return o==t},checkAvailable(t){for(var a=0;a<t.length;a++){var i=t[a].time.split(":"),r=parseInt(i[0]),e=new Date,o=e.getHours();if(o=o>12?o-12:o,o==r&&t.text)return!0}return!1},showBookingModal(t,a){t.preventDefault(),this.modalData=a,this.modal=new A(this.$refs.modalPosBooking),this.modal.show()},submitBooking(){for(var t=0;t<this.tables.length;t++)this.tables[t].id==this.modalData.id&&(this.tables[t]=this.modalData);this.modal.hide()}}},L={class:"pos-header"},z={class:"logo"},I=s("div",{class:"logo-img"},[s("i",{class:"bi bi-x-diamond",style:{"font-size":"1.5rem"}})],-1),E=s("div",{class:"logo-text"},"Pine & Dine",-1),O={class:"time",id:"time"},R={class:"nav"},j={class:"nav-item"},q=s("i",{class:"bi bi-bootstrap-reboot nav-icon"},null,-1),G={class:"nav-item"},J=s("i",{class:"bi bi-calendar-date nav-icon"},null,-1),K={class:"nav-item"},Q=s("i",{class:"bi bi-pie-chart nav-icon"},null,-1),W={class:"pos-content"},X={class:"pos-content-container h-100 p-4","data-scrollbar":"true","data-height":"100%"},Y={class:"d-md-flex align-items-center mb-4"},Z={class:"flex-1"},$={class:"fs-24px mb-1"},ss=s("div",{class:"mb-2 mb-md-0 d-flex"},[s("div",{class:"d-flex align-items-center me-3"},[s("i",{class:"fa fa-circle fa-fw text-inverse text-opacity-25 fs-9px me-1"}),k(" Completed ")]),s("div",{class:"d-flex align-items-center me-3"},[s("i",{class:"fa fa-circle fa-fw text-warning fs-9px me-1"}),k(" Upcoming ")]),s("div",{class:"d-flex align-items-center me-3"},[s("i",{class:"fa fa-circle fa-fw text-success fs-9px me-1"}),k(" In-progress ")])],-1),ts={class:"w-250px"},es={class:"row gx-4"},os={class:"col-xl-2 col-lg-3 col-md-4 col-sm-6"},as={class:"pos-table-booking-container"},is={class:"pos-table-booking-header"},ls={class:"d-flex align-items-center"},cs={class:"flex-1"},ns=s("div",{class:"title"},"TABLE",-1),ds={class:"no"},rs={class:"desc"},_s={key:0,class:"pe-1 text-success"},ms=s("i",{class:"bi bi-check2-circle fa-3x"},null,-1),hs=[ms],us={key:1,class:"text-inverse text-opacity-25"},ps=s("i",{class:"bi bi-dash-circle fa-3x"},null,-1),vs=[ps],fs={class:"pos-table-booking-body"},bs={class:"time"},gs={class:"info"},xs={key:0,class:"fa fa-circle"},ks=["onClick"],ws={key:1,class:"col-xl-2 col-lg-3 col-md-4 col-sm-6"},ys={class:"modal modal-pos fade",ref:"modalPosBooking"},Ds={class:"modal-dialog modal-lg"},Hs={class:"modal-content border-0"},Ts={class:"modal-header align-items-center"},Bs={class:"modal-title d-flex align-items-end"},Cs=s("img",{src:N,alt:"",height:"25",class:"invert-dark me-2 opacity-5"},null,-1),Ss={class:"fs-14px ms-2 text-inverse text-opacity-50"},As=s("a",{href:"#","data-bs-dismiss":"modal",class:"ms-auto btn-close"},null,-1),Vs={class:"modal-body"},Ms={class:"row"},Fs={class:"col-lg-6"},Us={key:0,class:"form-group mb-2"},Ns={class:"input-group"},Ps={class:"input-group-text fw-bold w-90px fs-13px"},Ls=["onUpdate:modelValue"],zs={class:"col-lg-6"},Is={key:0,class:"form-group mb-2"},Es={class:"input-group"},Os={class:"input-group-text fw-bold w-90px fs-13px"},Rs=["onUpdate:modelValue"],js=s("div",{class:"modal-footer"},[s("a",{href:"#",class:"btn btn-default w-100px","data-bs-dismiss":"modal"},"Cancel"),s("button",{type:"submit",class:"btn btn-success w-100px"},"Book")],-1);function qs(t,a,i,r,e,o){const u=b("RouterLink"),w=b("datepicker"),v=b("card-body"),y=b("card");return l(),n(f,null,[m(y,{class:"pos pos-vertical",id:"pos"},{default:h(()=>[m(v,{class:"pos-container"},{default:h(()=>[s("div",L,[s("div",z,[m(u,{to:"/pos/counter-checkout"},{default:h(()=>[I,E]),_:1})]),s("div",O,_(o.getTime()),1),s("div",R,[s("div",j,[m(u,{to:"/pos/kitchen-order",class:"nav-link"},{default:h(()=>[q]),_:1})]),s("div",G,[m(u,{to:"/pos/table-booking",class:"nav-link"},{default:h(()=>[J]),_:1})]),s("div",K,[m(u,{to:"/pos/menu-stock",class:"nav-link"},{default:h(()=>[Q]),_:1})])])]),s("div",W,[s("div",X,[s("div",Y,[s("div",Z,[s("div",$,"Available Table ("+_(o.getAvailableTable())+"/"+_(e.tables.length)+")",1),ss]),s("div",ts,[m(w)])]),s("div",es,[e.tables?(l(!0),n(f,{key:0},x(e.tables,c=>(l(),n("div",os,[m(y,{class:"pos-table-booking"},{default:h(()=>[m(v,{class:"p-1"},{default:h(()=>[s("div",as,[s("div",is,[s("div",ls,[s("div",cs,[ns,s("div",ds,_(c.name),1),s("div",rs,"max "+_(c.pax)+" pax",1)]),o.checkAvailable(c.reservation)?(l(),n("div",_s,hs)):(l(),n("div",us,vs))])]),s("div",fs,[(l(!0),n(f,null,x(c.reservation,d=>(l(),n("div",{class:H(["booking",{highlight:o.checkSameHour(d.time)}])},[s("div",bs,_(d.time),1),s("div",gs,_(d.text?d.text:"-"),1),s("div",{class:H(["status",o.getStatus(d.time,d.text)])},[d.text?(l(),n("i",xs)):g("",!0)],2)],2))),256))])]),s("a",{href:"#",class:"stretched-link",onClick:d=>o.showBookingModal(d,c)},null,8,ks)]),_:2},1024)]),_:2},1024)]))),256)):(l(),n("div",ws," No records found "))])])])]),_:1})]),_:1}),s("div",ys,[s("div",Ds,[s("div",Hs,[e.modalData?(l(),V(y,{key:0},{default:h(()=>[s("form",{onSubmit:a[0]||(a[0]=M((...c)=>o.submitBooking&&o.submitBooking(...c),["prevent"]))},[m(v,{class:"p-0"},{default:h(()=>[s("div",Ts,[s("h5",Bs,[Cs,k(" Table "+_(e.modalData.name)+" ",1),s("small",Ss,"max "+_(e.modalData.pax)+" pax",1)]),As]),s("div",Vs,[s("div",Ms,[s("div",Fs,[(l(!0),n(f,null,x(e.modalData.reservation,(c,d)=>(l(),n(f,null,[d<=7?(l(),n("div",Us,[s("div",Ns,[s("div",Ps,_(c.time),1),T(s("input",{type:"text",class:"form-control",placeholder:"","onUpdate:modelValue":D=>c.text=D},null,8,Ls),[[B,c.text]])])])):g("",!0)],64))),256))]),s("div",zs,[(l(!0),n(f,null,x(e.modalData.reservation,(c,d)=>(l(),n(f,null,[d>7?(l(),n("div",Is,[s("div",Es,[s("div",Os,_(c.time),1),T(s("input",{type:"text",class:"form-control",placeholder:"","onUpdate:modelValue":D=>c.text=D},null,8,Rs),[[B,c.text]])])])):g("",!0)],64))),256))])])]),js]),_:1})],32)]),_:1})):g("",!0)])])],512)],64)}const Xs=C(P,[["render",qs]]);export{Xs as default};
